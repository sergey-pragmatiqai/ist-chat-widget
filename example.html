<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>N8N Chat Integration Example</title>
    <!-- Include the chat CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@pragmatiqai/ist-chat-widget@latest/dist/style.css"
    />
    <style>
      elevenlabs-convai {
        width: 300px !important;
        height: 300px !important;
        position: fixed !important;
        bottom: 0px !important;
        right: 80px !important;
        top: auto;
        left: auto;
        z-index: 1000 !important;
      }
    </style>
  </head>
  <body>
    <elevenlabs-convai
      agent-id="agent_4001k54p101sehq82jjqq40qnjkh"
    ></elevenlabs-convai>
    <script
      src="https://unpkg.com/@elevenlabs/convai-widget-embed"
      async
      type="text/javascript"
    ></script>

    <script type="module">
      import { createChat } from "https://cdn.jsdelivr.net/npm/@pragmatiqai/ist-chat-widget@latest/dist/chat.bundle.es.js";

      createChat({
        webhookUrl:
          "https://n8n-prod.pragmatiqai.com/webhook/4070057c-7bf6-4dc4-8c1a-784cba72a92a/chat",
        mode: "window",
        showElevenLabsButton: true,
        showWindowCloseButton: false,
        elevenLabsAgentUrl:
          "https://elevenlabs.io/app/talk-to?agent_id=agent_4001k54p101sehq82jjqq40qnjkh",

        theme: {
          // Header Icon Customization (optional)
          headerIconSize: "3.5rem",
          headerIconMarginRight: "0.625rem",
          headerIconBorderRadius: "0.5rem",

          //ElevenLabs Button
          elevenLabsButtonBackground: "#112351",
          elevenLabsButtonColor: "#ffffff",
          elevenLabsButtonBackgroundHover: "#0f1f47",
          elevenLabsButtonColorHover: "#ffffff",
          elevenLabsButtonBackgroundDisabled: "#9ca3af",
          elevenLabsButtonBorderRadius: "0.5rem",
          elevenLabsButtonFocusColor: "#112351",

          //Close Button
          closeButtonColor: "#ffffff",
          closeButtonBorderRadius: "0.5rem",
          closeButtonPadding: "0.375rem",
          closeButtonIconSize: "1.125rem",
          closeButtonPosition: "static",
          closeButtonTop: "auto",
          closeButtonRight: "auto",
          closeButtonBottom: "auto",
          closeButtonLeft: "auto",
          closeButtonZIndex: "auto",

          // Welcome Message Customization (optional)
          welcomeMessageBackground: "#f8f9fa",
          welcomeMessageColor: "#112351",
          welcomeMessageBorder: "1px solid #112351",
          welcomeMessageBorderRadius: "1rem",
          welcomeMessageFontSize: "0.9375rem",
          welcomeMessageCloseColorHover: "#112351",
          welcomeMessageCloseBorderRadius: "1rem",
          welcomeMessageCloseTransition: "all 0.3s ease",
          welcomeMessageCloseFocusShadow: "0 0 0 0.125rem #112351",
          welcomeMessageIconSize: "3.75rem",
          welcomeMessageIconGap: "1rem",
          welcomeMessageMaxWidth: "7.5rem",

          // Welcome Message Arrow
          welcomeMessageArrowRightOffset: "1.875rem",

          windowBottom: "2rem",
          windowRight: "2rem",
          windowZIndex: "999",
          customCSS: `          
          :root {
          /* IST Brand Colors */
          --chat--color-primary: #112351;                    /* IST Velvet Blue */
          --chat--color-primary-shade-50: #1a2d5f;          /* Darker blue shade */
          --chat--color-primary-shade-100: #0f1f47;         /* Even darker blue */
          --chat--color-secondary: #ffffff;                  /* IST Rose Gold */
          --chat--color-secondary-shade-50: #f7d278;        /* Slightly darker rose gold */
          --chat--color-white: #ffffff;
          --chat--color-light: #f5f5f5;
          --chat--color-light-shade-50: #e8e8e8;
          --chat--color-light-shade-100: #d1d1d1;
          --chat--color-medium: #cccccc;
          --chat--color-dark: #112351;                       /* IST Velvet Blue */
          --chat--color-disabled: #666666;
          --chat--color-typing: #112351;                     /* IST Velvet Blue */
          
          /* Layout */
          --chat--spacing: 1.08rem;
          --chat--border-radius: 0.75rem;
          --chat--transition-duration: 0.3s;
          --chat--window--width: 26.25rem;
          --chat--window--height: 40.625rem;
          
          /* Header */
          --chat--header-height: 2.1875rem;
          --chat--header--padding: var(--chat--spacing);
          --chat--header--background: var(--chat--color-dark);
          --chat--header--color: var(--chat--color-secondary);   
          --chat--header--border-top: none;
          --chat--header--border-bottom: 0.125rem solid var(--chat--color-secondary);
          --chat--heading--font-size: 1.25rem;
          --chat--header--color: var(--chat--color-secondary);
          --chat--subtitle--font-size: 0.9em;
          --chat--subtitle--line-height: 1.6;
          
          /* Input */
          --chat--textarea--height: 3.75rem;
          
          /* Messages */
          --chat--message--font-size: 0.875rem;
          --chat--message--padding: var(--chat--spacing);
          --chat--message--border-radius: 0.625rem;
          --chat--message-line-height: 1.5;
          --chat--message--bot--background: var(--chat--color-light);
          --chat--message--bot--color: var(--chat--color-dark);
          --chat--message--bot--border: 1px solid orange;
          --chat--message--user--background: #F9D98D;        /* Changed to requested color */
          --chat--message--user--color: var(--chat--color-dark);
          --chat--message--user--border: 1px solid var(--chat--color-secondary-shade-50);
          --chat--message--pre--background: rgba(17, 35, 81, 0.05);
          
          /* Toggle Button */
          --chat--toggle--background: var(--chat--color-primary);
          --chat--toggle--hover--background: #ff6600;                /* Orange instead of white */
          --chat--toggle--active--background: var(--chat--color-secondary-shade-50);
          --chat--toggle--color: var(--chat--color-secondary);
          --chat--toggle--size: 3.75rem;
      }
      
      /* Custom Font Styles */
      /* Set Georgia as default font for the entire chat */
      .chat-container,
      .chat-window,
      .chat-messages,
      .chat-message,
      .chat-input,
      .chat-textarea,
      .chat-button {
          font-family: Arial, Helvetica, sans-serif !important;
      }
      
      /* Set Arial specifically for header elements */
      .chat-header,
      .chat-header *,
      .chat-title,
      .chat-subtitle {
          font-family: Arial, Helvetica, sans-serif !important;
      }
      
      /* Additional selectors to ensure proper font application */
      [class*="chat-header"] {
          font-family: Arial, Helvetica, sans-serif !important;
      }
      
      [class*="chat-message"],
      [class*="chat-input"],
      [class*="chat-textarea"] {
          font-family: Arial, Helvetica, sans-serif !important;
      }
          `,
        },

        i18n: {
          en: {
            title: "Welcome to the IST!",
            subtitle: "",
            getStarted: "New Conversation",
            inputPlaceholder: "Type your question..",
            closeButtonTooltip: "Close chat",
            elevenLabsButtonTooltip: "Open ElevenLabs Agent",
          },
        },

        // Welcome message configuration
        welcomeMessage: {
          enabled: true,
          text: "Welcome, how may I help you?",
          icon: "https://cdn.jsdelivr.net/gh/sergey-pragmatiqai/ist-chat-widget@latest/packages/frontend/@n8n/chat/dist/assets/ist_chat_icon.png",
          showArrow: true,
        },

        // Header icon
        headerIcon: "https://cdn.jsdelivr.net/gh/sergey-pragmatiqai/ist-chat-widget@latest/packages/frontend/@n8n/chat/dist/assets/ist_chat_icon.png",

        initialMessages: [
          "I'm the 𝐀𝐈 𝐂𝐡𝐚𝐭 𝐀𝐬𝐬𝐢𝐬𝐭𝐚𝐧𝐭 for the International School of Tallinn, here to help you anytime. Please note that I'm still learning and getting smarter every day 🙂 \n\n𝐘𝐨𝐮 𝐚𝐫𝐞 𝐰𝐞𝐥𝐜𝐨𝐦𝐞 𝐭𝐨 𝐚𝐬𝐤 𝐦𝐞 𝐚𝐛𝐨𝐮𝐭:  \n\ • Admissions (Preschool–Grade 12, IB PYP, MYP, DP)  \n\ • Tuition fees and discounts  \n\ • Curriculum, school life, and school services  \n\ • Practical info: calendar, meals, timetables, and contacts  \n\ • Additional questions regarding the school\n\nIf I can't help directly, I'll connect you with the right person. \n\nFor your privacy, please avoid sharing personal or confidential details here.\n\n𝐇𝐨𝐰 𝐦𝐚𝐲 𝐈 𝐚𝐬𝐬𝐢𝐬𝐭 𝐲𝐨𝐮?",
        ],
      });
    </script>
  </body>
</html>
